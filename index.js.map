{"version":3,"file":"index.js","mappings":"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","sources":["webpack://chatty-cloud/./node_modules/@socket.io/base64-arraybuffer/dist/base64-arraybuffer.es5.js","webpack://chatty-cloud/./node_modules/@socket.io/component-emitter/index.js","webpack://chatty-cloud/./node_modules/backo2/index.js","webpack://chatty-cloud/./node_modules/debug/src/browser.js","webpack://chatty-cloud/./node_modules/debug/src/common.js","webpack://chatty-cloud/./node_modules/has-cors/index.js","webpack://chatty-cloud/./node_modules/ms/index.js","webpack://chatty-cloud/./node_modules/parseqs/index.js","webpack://chatty-cloud/./node_modules/parseuri/index.js","webpack://chatty-cloud/./src/Chat.ts","webpack://chatty-cloud/./src/ChatList.ts","webpack://chatty-cloud/./src/Types.ts","webpack://chatty-cloud/./src/index.ts","webpack://chatty-cloud/./node_modules/yeast/index.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/globalThis.browser.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/index.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/socket.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/transport.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/transports/index.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/transports/polling-xhr.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/transports/polling.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/transports/websocket-constructor.browser.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/transports/websocket.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/transports/xmlhttprequest.browser.js","webpack://chatty-cloud/./node_modules/engine.io-client/build/cjs/util.js","webpack://chatty-cloud/./node_modules/engine.io-parser/build/cjs/commons.js","webpack://chatty-cloud/./node_modules/engine.io-parser/build/cjs/decodePacket.browser.js","webpack://chatty-cloud/./node_modules/engine.io-parser/build/cjs/encodePacket.browser.js","webpack://chatty-cloud/./node_modules/engine.io-parser/build/cjs/index.js","webpack://chatty-cloud/./node_modules/socket.io-client/build/cjs/index.js","webpack://chatty-cloud/./node_modules/socket.io-client/build/cjs/manager.js","webpack://chatty-cloud/./node_modules/socket.io-client/build/cjs/on.js","webpack://chatty-cloud/./node_modules/socket.io-client/build/cjs/socket.js","webpack://chatty-cloud/./node_modules/socket.io-client/build/cjs/url.js","webpack://chatty-cloud/./node_modules/socket.io-parser/build/cjs/binary.js","webpack://chatty-cloud/./node_modules/socket.io-parser/build/cjs/index.js","webpack://chatty-cloud/./node_modules/socket.io-parser/build/cjs/is-binary.js","webpack://chatty-cloud/webpack/bootstrap","webpack://chatty-cloud/webpack/runtime/define property getters","webpack://chatty-cloud/webpack/runtime/hasOwnProperty shorthand","webpack://chatty-cloud/webpack/runtime/make namespace object","webpack://chatty-cloud/webpack/startup"],"sourcesContent":["/*\n * base64-arraybuffer 1.0.1 <https://github.com/niklasvh/base64-arraybuffer>\n * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>\n * Released under MIT License\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nvar lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nvar encode = function (arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nvar decode = function (base64) {\n    var bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    var arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n\nexport { decode, encode };\n//# sourceMappingURL=base64-arraybuffer.es5.js.map\n","\n/**\n * Expose `Emitter`.\n */\n\nexports.Emitter = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","import io, { Socket } from 'socket.io-client';\nimport Chatty, { ChattyException } from '.';\nimport { ChatList } from './ChatList';\nimport {\n  ChatType,\n  MessageType,\n  ChattyEvent,\n  ErrorResponseType,\n  MessagesFetchResponseType,\n  ChatConnectOptions,\n  MessagesFetchHandler,\n  MessageReceiveHandler,\n  MessagesUpdateHandler,\n  ChatRefreshHandler,\n  MessageSendHandler,\n  ChatConnectHandler\n} from './Types';\n\ndeclare const MODE: string;\n\nconst dev = MODE === 'development' ? 'dev' : '';\n\nexport class Chat {\n  socket: Socket | null;\n  chatlist: ChatList | null;\n  id: string | null;\n\n  connectHandler: ChatConnectHandler | null;\n  sendMessageHandler: MessageSendHandler | null;\n  fetchMessagesHandler: MessagesFetchHandler | null;\n  newMessageHandler: MessageReceiveHandler | null;\n  updateMessagesHandler: MessagesUpdateHandler | null;\n  refreshChatHandler: ChatRefreshHandler | null;\n\n  constructor() {\n    this.socket = null;\n    this.chatlist = null;\n    this.id = null;\n    this.connectHandler = null;\n    this.sendMessageHandler = null;\n    this.fetchMessagesHandler = null;\n    this.newMessageHandler = null;\n    this.updateMessagesHandler = null;\n    this.refreshChatHandler = null;\n  }\n\n\n  onConnectHandler(handler: ChatConnectHandler) {\n    this.connectHandler = handler;\n  }\n  onSendMessageHandler(handler: MessageSendHandler) {\n    this.sendMessageHandler = handler;\n  }\n  onFetchMessagesHandler(handler: MessagesFetchHandler) {\n    this.fetchMessagesHandler = handler;\n  }\n  onNewMessageHandler(handler: MessageReceiveHandler) {\n    this.newMessageHandler = handler;\n  }\n  onUpdateMessagesHandler(handler: MessagesUpdateHandler) {\n    this.updateMessagesHandler = handler;\n  }\n  onRefreshChatHandler(handler: ChatRefreshHandler) {\n    this.refreshChatHandler = handler;\n  }\n\n  connect(options: ChatConnectOptions, chatlist: ChatList | null) {\n    if (!Chatty.app || !Chatty.member || !Chatty.member.id) {\n      throw new ChattyException('E2001');\n    }\n\n    if (!options.at && !options.with) {\n      throw new ChattyException('E4007');\n    }\n\n    if (options.with) {\n      if (typeof options.with === 'string') {\n        options.with = [options.with];\n\n      }\n      options.with = options.with.filter(MemberId => MemberId && MemberId !== 'undefined' && MemberId !== 'null')\n      options.with.push(Chatty.member.id);\n\n      // Remove duplicated elements\n      options.with = options.with.filter((value, index, self) => self.indexOf(value) === index);\n\n      if (options.with.length < 2) {\n        throw new ChattyException('E4008');\n      }\n\n      if (options.distinctKey === undefined) {\n        options.distinctKey = Chatty.generateDistinctKey(options.with)\n      }\n    }\n\n\n    const url: string = MODE === 'none' ? 'ws://localhost:4000' : `wss://${dev}socket.chatty-cloud.com`;\n\n    // option checker\n    Object.keys(options).forEach(key => !options[key] && delete options[key]);\n\n    this.socket = io(`${url}/chat.${Chatty.app.name}`, {\n      transports: [\"polling\", \"websocket\"],\n      query: {\n        MemberId: Chatty.member.id!,\n        options: JSON.stringify(options)\n      },\n      auth: {\n        token: Chatty.apiKey\n      },\n      forceNew: true,\n      // withCredentials: true, // cors \"*\" 일때는 이값을 설정하면안된다.\n    });\n\n    if (chatlist) {\n      this.chatlist = chatlist;\n    }\n\n    this.addListener();\n  }\n\n  disconnect() {\n    if (!this.socket) {\n      throw new ChattyException('E4004');\n    }\n    this.socket.disconnect();\n    this.removeListener();\n    this.socket = null;\n    console.debug('::: Chatty DISCONNECT_DONE Chat');\n  }\n  fetchMessages(refresh: boolean) {\n    if (!this.socket) {\n      throw new ChattyException('E4004');\n    }\n    this.socket.emit(ChattyEvent.FETCH_MESSAGES, { refresh: refresh });\n  }\n  sendMessage(data) {\n    if (!this.socket) {\n      throw new ChattyException('E4004');\n    }\n    this.socket.emit(ChattyEvent.SEND_MESSAGE, { ...data, retry: 5 });\n  }\n  refreshChat(ChatId: string) {\n    if (!this.socket) {\n      throw new ChattyException('E4004');\n    }\n\n    // chat 화면의 정보 및 참여멤버정보등이 바뀔때 호출이되어야 함\n    this.socket.emit(ChattyEvent.REFRESH_CHAT, ChatId);\n  }\n  markAsRead() {\n    if (!this.socket) {\n      throw new ChattyException('E4004');\n    }\n    this.socket.emit(ChattyEvent.MARK_AS_READ);\n  }\n\n\n\n\n\n\n  addListener() {\n    if (!this.socket) {\n      throw new ChattyException('E4004');\n    }\n\n    this.socket.on(ChattyEvent.CONNECT_DONE, (chat: ChatType) => {\n      if (!this.connectHandler) {\n        throw new ChattyException('E4006', 'connectHandler');\n      }\n      console.debug(`::: Chatty CONNECT_DONE`, chat);\n      this.id = chat.id; // 연결된 ChatId를 Chat instance에 저장\n      this.connectHandler(chat, null);\n    });\n\n    this.socket.on(ChattyEvent.CONNECT_FAIL, (err: ErrorResponseType) => {\n      if (!this.connectHandler) {\n        throw new ChattyException('E4006', 'connectHandler');\n      }\n      console.warn('::: Chatty CONNECT_FAIL', err);\n      this.connectHandler(null, err);\n    });\n\n    this.socket.on(ChattyEvent.FETCH_MESSAGES_DONE, (data: MessagesFetchResponseType) => {\n      if (!this.fetchMessagesHandler) {\n        throw new ChattyException('E4006', 'fetchMessagesHandler');\n      }\n      console.debug('::: Chatty FETCH_MESSAGES_DONE', data);\n      this.fetchMessagesHandler(data, null);\n\n      this.markAsRead();\n    });\n\n    this.socket.on(ChattyEvent.FETCH_MESSAGES_FAIL, (err: ErrorResponseType) => {\n      if (!this.fetchMessagesHandler) {\n        throw new ChattyException('E4006', 'fetchMessagesHandler');\n      }\n      console.warn('::: Chatty FETCH_MESSAGES_FAIL', err);\n      this.fetchMessagesHandler(null, err);\n    });\n\n    this.socket.on(ChattyEvent.SEND_MESSAGE_DONE, (message) => {\n      if (!this.sendMessageHandler) {\n        throw new ChattyException('E4006', 'sendMessageHandler');\n      }\n      console.debug('::: Chatty SEND_MESSAGE_DONE', message);\n      this.sendMessageHandler(message, null);\n\n      // 내가 메시지를 보낸게 성공하면 항상 나의 ChatList를 업데이트해야한다.\n      if (this.chatlist?.socket) {\n        this.chatlist.refreshChatList(message.ChatId);\n      }\n    });\n    this.socket.on(ChattyEvent.SEND_MESSAGE_FAIL, (err) => {\n      if (!this.sendMessageHandler) {\n        throw new ChattyException('E4006', 'sendMessageHandler');\n      }\n      console.warn('::: Chatty SEND_MESSAGE_FAIL', err);\n      this.sendMessageHandler(null, err);\n    });\n\n    this.socket.on(ChattyEvent.SEND_MESSAGE_RETRY, (data) => {\n      if (!this.socket) {\n        throw new ChattyException('E4004');\n      }\n      console.debug('::: Chatty SEND_MESSAGE_RETRY', data);\n      this.socket.emit(ChattyEvent.SEND_MESSAGE, data);\n    });\n\n    this.socket.on(ChattyEvent.NEW_MESSAGE, (message: MessageType) => {\n      if (!this.newMessageHandler) {\n        throw new ChattyException('E4006', 'newMessageHandler');\n      }\n      console.debug('::: Chatty NEW_MESSAGE', message);\n      this.newMessageHandler(message, null);\n\n      this.markAsRead();\n    });\n    this.socket.on(ChattyEvent.MARK_AS_READ_DONE, (data: any) => {\n      console.debug('::: Chatty MARK_AS_READ_DONE');\n\n      // ChatList로부터 왔다면 ChatList를 업데이트해야한다.\n      if (this.chatlist?.socket) {\n        this.chatlist.refreshChatList(data.ChatId);\n      }\n    });\n    this.socket.on(ChattyEvent.MARK_AS_READ_FAIL, (err: ErrorResponseType) => {\n      console.warn('::: Chatty MARK_AS_READ_FAIL', err);\n    });\n    this.socket.on(ChattyEvent.MARK_AS_READ_BYPASS, () => {\n      // MARK_AS_READ_DONE의 응답으로  data가 MARK_AS_READ_BYPASS 인경우가 있다. \n      // member 가 SUPER인경우에 해당되며 MARK_AS_READ 요청에대해 서버가 bypass로 동작한다\n      console.debug('::: Chatty MARK_AS_READ_BYPASS');\n    });\n\n    /**\n     * UPDATE_MESSAGES 가 발생하는 경우 \n     * server로 부터 받으며 MARK_AS_READ_DONE 일경우 발생한다\n     * MARK_AS_READ 가 발생하는 경우는\n     * 1. 내가 Send Message한후 즉 NEW_MESSAGE가 발생한후 \n     * 2. 상대가 Chat에 진입한경우 즉 FETCH_MESSAGES가 발생한후\n     */\n    this.socket.on(ChattyEvent.UPDATE_MESSAGES, (messages) => {\n      if (!this.updateMessagesHandler) {\n        throw new ChattyException('E4006', 'updateMessagesHandler');\n      }\n      console.debug('::: Chatty UPDATE_MESSAGES');\n      this.updateMessagesHandler(messages, null);\n    });\n\n    this.socket.on(ChattyEvent.REFRESH_CHAT_DONE, (chat: ChatType) => {\n      if (!this.refreshChatHandler) {\n        throw new ChattyException('E4006', 'refreshChatHandler');\n      }\n      console.debug(`::: Chatty REFRESH_CHAT_DONE`, chat);\n      this.refreshChatHandler(chat, null);\n    });\n    this.socket.on(ChattyEvent.REFRESH_CHAT_FAIL, (err: ErrorResponseType) => {\n      if (!this.refreshChatHandler) {\n        throw new ChattyException('E4006', 'refreshChatHandler');\n      }\n      console.warn(`::: Chatty REFRESH_CHAT_FAIL`, err);\n      this.refreshChatHandler(null, err);\n    });\n  }\n\n\n\n  removeListener() {\n    if (!this.socket) {\n      throw new ChattyException('E4004');\n    }\n\n    this.socket.off(ChattyEvent.CONNECT_DONE);\n    this.socket.off(ChattyEvent.CONNECT_FAIL);\n\n    this.socket.off(ChattyEvent.FETCH_MESSAGES_DONE);\n    this.socket.off(ChattyEvent.FETCH_MESSAGES_FAIL);\n\n    this.socket.off(ChattyEvent.SEND_MESSAGE_DONE);\n    this.socket.off(ChattyEvent.SEND_MESSAGE_FAIL);\n\n    this.socket.off(ChattyEvent.SEND_MESSAGE_RETRY);\n\n    this.socket.off(ChattyEvent.NEW_MESSAGE);\n\n    this.socket.off(ChattyEvent.MARK_AS_READ_DONE);\n    this.socket.off(ChattyEvent.MARK_AS_READ_FAIL);\n    this.socket.off(ChattyEvent.MARK_AS_READ_BYPASS);\n\n    this.socket.off(ChattyEvent.REFRESH_CHAT_DONE);\n    this.socket.off(ChattyEvent.REFRESH_CHAT_FAIL);\n\n  }\n\n}","import io, { Socket } from 'socket.io-client';\nimport Chatty, { ChattyException } from '.';\nimport {\n  ChatType,\n  ChattyEvent,\n  ErrorResponseType,\n  ChatListFetchOptions,\n  ChatListFetchResponseType,\n  ChatListFetchHandler,\n  ChatListRefreshHandler,\n  ChatListConnectHandler,\n  ChatListConnectResponseType\n} from './Types';\n\ndeclare const MODE: string;\n\nconst dev = MODE === 'development' ? 'dev' : '';\n\nexport class ChatList {\n  socket: Socket | null;\n\n  connectHandler: ChatListConnectHandler | null;\n  fetchChatListHandler: ChatListFetchHandler | null;\n  refreshChatListHandler: ChatListRefreshHandler | null;\n\n  constructor() {\n    this.socket = null;\n    this.connectHandler = null;\n    this.fetchChatListHandler = null;\n    this.refreshChatListHandler = null;\n  }\n\n  onConnectHandler(handler: ChatListConnectHandler) {\n    this.connectHandler = handler;\n  }\n  onFetchChatListHandler(handler: ChatListFetchHandler) {\n    this.fetchChatListHandler = handler;\n  }\n  onRefreshChatListHandler(handler: ChatListRefreshHandler) {\n    this.refreshChatListHandler = handler;\n  }\n\n  connect() {\n    if (!Chatty.app || !Chatty.member) {\n      throw new ChattyException('E2001');\n    }\n\n    const url: string = MODE === 'none' ? 'ws://localhost:4000' : `wss://${dev}socket.chatty-cloud.com`;\n    this.socket = io(`${url}/chatlist.${Chatty.app.name}`, {\n      transports: [\"polling\", \"websocket\"],\n      query: { MemberId: Chatty.member.id! },\n      auth: {\n        token: Chatty.apiKey\n      }\n    });\n    this.addListener();\n  }\n\n\n  disconnect() {\n    if (!this.socket) {\n      throw new ChattyException('E4003');\n    }\n\n    this.socket.disconnect();\n    this.removeListener();\n    this.socket = null;\n    console.debug('::: Chatty DISCONNECT_DONE ChatList');\n  }\n\n\n  fetchChatList(options: ChatListFetchOptions) {\n    if (!this.socket) {\n      throw new ChattyException('E4003');\n    }\n    this.socket.emit(ChattyEvent.FETCH_CHATLIST, options);\n  }\n\n\n  refreshChatList(ChatId: string) {\n    if (!this.socket) {\n      throw new ChattyException('E4003');\n    }\n    this.socket.emit(ChattyEvent.REFRESH_CHATLIST, ChatId);\n  }\n\n\n  addListener() {\n    if (!this.socket) {\n      throw new ChattyException('E4003');\n    }\n\n\n    this.socket.on(ChattyEvent.CONNECT_DONE, (data: ChatListConnectResponseType) => {\n      if (!this.connectHandler) {\n        throw new ChattyException('E4005', 'connectHandler');\n      }\n      console.debug('::: Chatty CONNECT_DONE ChatList');\n      this.connectHandler(data, null);\n    });\n    this.socket.on(ChattyEvent.CONNECT_FAIL, (err: ErrorResponseType) => {\n      if (!this.connectHandler) {\n        throw new ChattyException('E4005', 'connectHandler');\n      }\n      console.debug('::: Chatty CONNECT_FAIL', err);\n      this.connectHandler(null, err);\n    });\n\n\n    this.socket.on(ChattyEvent.FETCH_CHATLIST_DONE, (chats: ChatListFetchResponseType) => {\n      if (!this.fetchChatListHandler) {\n        throw new ChattyException('E4005', 'fetchChatListHandler');\n      }\n      console.debug('::: Chatty FETCH_CHATLIST_DONE', chats);\n      this.fetchChatListHandler(chats, null);\n    });\n    this.socket.on(ChattyEvent.FETCH_CHATLIST_FAIL, (err: ErrorResponseType) => {\n      if (!this.fetchChatListHandler) {\n        throw new ChattyException('E4005', 'fetchChatListHandler');\n      }\n      console.debug('::: Chatty FETCH_CHATLIST_FAIL', err);\n      this.fetchChatListHandler(null, err);\n    });\n\n\n    this.socket.on(ChattyEvent.REFRESH_CHATLIST_DONE, (chat: ChatType) => {\n      if (!this.refreshChatListHandler) {\n        throw new ChattyException('E4005', 'refreshChatListHandler');\n      }\n      console.debug(`::: Chatty REFRESH_CHATLIST_DONE`, chat);\n      this.refreshChatListHandler(chat, null);\n    });\n    this.socket.on(ChattyEvent.REFRESH_CHATLIST_FAIL, (err: ErrorResponseType) => {\n      if (!this.refreshChatListHandler) {\n        throw new ChattyException('E4005', 'refreshChatListHandler');\n      }\n      console.debug(`::: Chatty REFRESH_CHATLIST_FAIL`, err);\n      this.refreshChatListHandler(null, err);\n    });\n  }\n\n\n  removeListener() {\n    if (!this.socket) {\n      throw new ChattyException('E4003');\n    }\n\n    this.socket.off(ChattyEvent.CONNECT_DONE);\n    this.socket.off(ChattyEvent.CONNECT_FAIL);\n\n    this.socket.off(ChattyEvent.FETCH_CHATLIST_DONE);\n    this.socket.off(ChattyEvent.FETCH_CHATLIST_FAIL);\n\n    this.socket.off(ChattyEvent.REFRESH_CHATLIST_DONE);\n    this.socket.off(ChattyEvent.REFRESH_CHATLIST_FAIL);\n  }\n}","/**\n * \n  ___          _       _____                  \n | _ ) __ _ __(_)__ __|_   _|  _ _ __  ___ ___\n | _ \\/ _` (_-< / _|___|| || || | '_ \\/ -_|_-<\n |___/\\__,_/__/_\\__|    |_| \\_, | .__/\\___/__/\n                            |__/|_|           \n\n */\nexport type AppType = {\n  id: string\n  name: string\n  server: string\n  apiKey: string\n  firebaseCredentials: FirebaseCredentialsType | null\n  state: AppStateType\n  pricing: PricingType\n  image: string\n  language: string\n  country: string\n  enableTranslation: boolean\n  chatPageLimit: number\n  chatListPageLimit: number\n  thumbnailSize: number\n  systemMessages: Array<SystemMessagesIndexSignature> | []\n  notificationSound: string\n  enableImageUpload: boolean\n  enableVideoUpload: boolean\n  maxImageSize: number\n  maxVideoSize: number\n  multipleUploadCount: number\n  createdAt: Date\n  updatedAt: Date\n  deletedAt: Date | null\n}\n\nexport type AppUserType = {\n  role: AppRoleType\n  createdAt: Date\n  updatedAt: Date\n  AppId: string\n  UserId: string\n}\n\nexport type UserType = {\n  id: string\n  email: string\n  password: string\n  name: string\n  avatar: string\n  verification: boolean\n  tfaEnable: boolean\n  token: string\n  tfa: string\n  visitedAt: Date\n  createdAt: Date\n  updatedAt: Date\n  deletedAt: Date | null\n}\n\nexport type ChatType = {\n  id: string\n  private: boolean\n  open: boolean\n  name: string\n  image: string\n  lastMessage: MessageType | null\n  data: object | null\n  distinctKey: string\n  group: string\n  maxMember: number\n  createdAt: Date\n  updatedAt: Date\n  deletedAt: Date | null\n  AppId: string\n}\n\nexport type ChatMemberType = {\n  missedCount: number\n  role: ChatRoleType\n  createdAt: Date\n  updatedAt: Date\n  ChatId: string\n  MemberId: string\n}\n\nexport type MemberType = {\n  id: string\n  name: string\n  language: string\n  country: string\n  avatar: string\n  deviceToken: string\n  device: DeviceType | null\n  group: string\n  permission: MemberPermissionType\n  data: object | null\n  createdAt: Date\n  updatedAt: Date\n  deletedAt: Date | null\n  AppId: string\n}\n\nexport type MessageType = {\n  id: string\n  text: string | null\n  files: Array<{ uri: string }> | null\n  json: object | null\n  type: MessageFormatType\n  translation: TranslationIndexSignature | null\n  by: ByType\n  readReceipt: number\n  createdAt: Date\n  updatedAt: Date\n  deletedAt: Date | null\n  ChatId: string\n  SenderId: string | null\n}\n\nexport type InvitationType = {\n  role: string\n  accept: boolean\n  email: string\n  inviter: string\n  createdAt: Date\n  updatedAt: Date\n  AppId: string\n}\n\n\n// export interface BillingAttributes {\n//   readonly id: string;\n//   cardNumber: string;\n//   cardExpiration: string;\n//   cardPassword: string;\n//   cvv: string;\n//   firstName: string;\n//   lastName: string;\n//   country: string;\n//   billingAddress1: string;\n//   billingAddress2: string;\n//   city: string;\n//   state: string;\n//   postalCode: string;\n//   additionalInfo: string;\n//   UserId: string;\n// };\n\n// export interface PaymentAttributes {\n//   readonly id: string;\n// };\n\n\nexport type DeviceType = {\n  platform: string,\n  language: string,\n  product: string,\n  userAgent: string,\n  sdkVersion: string,\n};\n\nexport enum MemberPermissionType {\n  NONE = 0,\n  READ,\n  WRITE,\n  ADMIN = 5,\n  SUPER = 10\n};\n\nexport type FileType = {\n  uri: string,\n  type: string,\n  name: string\n}\n\nexport type FirebaseCredentialsType = {\n  privateKey: string,\n  clientEmail: string,\n  projectId: string,\n}\n\nexport type ByType = 'USER' | 'ADMIN' | 'SYSTEM';\nexport type PricingType = 'FREE' | 'PRODUCTION' | 'ADVANCED' | 'ENTERPRISE';\nexport type AppStateType = 'ACTIVE' | 'DEACTIVE';\nexport type AppRoleType = 'OWNER' | 'DEVELOPER' | 'MANAGER';\nexport type ChatRoleType = 'OWNER' | 'MEMBER' | 'OBSERVER';\nexport type MessageFormatType = 'TEXT' | 'FILE' | 'JSON';\n\nexport interface SystemMessagesIndexSignature {\n  [key: string]: string\n}\n\nexport interface TranslationIndexSignature {\n  [key: string]: string\n}\n\n/**\n * Default System Message\n * string이 empty가 아니라면 system message를 created 하고 chat Member에 silent push 를 보낸다\n * invite 와 exclude의 경우에는 대상자에게만 push 를 보낸다.\n * join 와 leave 는 대상자를 제외한 chat member 모두에게 push를 보낸다\n */\nexport const DefaultSystemMessages = [\n  { welcome: 'Welcome to chat' },\n  { invite: '{MEMBER-NAME} was invited to chat' },\n  { exclude: '{MEMBER-NAME}  was excluded from chat' },\n  { join: '{MEMBER-NAME}  joined chat' },\n  { leave: '{MEMBER-NAME}  left chat' }\n];\n\nexport const SupportedImageFormat = ['image/png', 'image/jpg', 'image/jpeg', 'image/gif', 'image/webp'];\nexport const SupportedVideoFormat = ['video/mp4', 'video/webm'];\n\n\nexport interface ChatConnectOptions {\n  at?: string | undefined;\n  with?: string | string[] | undefined;\n  distinctKey?: string | null | undefined;\n  private?: boolean | undefined;\n  name?: string | undefined;\n  image?: string | undefined;\n  data?: {} | undefined;\n  group?: string | undefined;\n}\n\nexport interface ChatListFetchOptions {\n  refresh: boolean | undefined;\n  group: string | undefined;\n}\n\nexport type MessagesFetchResponseType = {\n  refresh: boolean;\n  hasNext: boolean;\n  messages: Array<MessageType>;\n} | null\n\nexport type ChatConnectResponseType = ChatType | null;\nexport type ChatListConnectResponseType = {} | null;\nexport type MessageSendResponseType = MessageType | null;\nexport type MessageReceiveResponseType = MessageType | null;\nexport type MessagesUpdateResponseType = Array<MessageType> | null;\nexport type ChatListRefreshResponseType = ChatType | null;\nexport type ChatRefreshResponseType = ChatType | null;\n\nexport type ChatListFetchResponseType = {\n  refresh: boolean;\n  hasNext: boolean;\n  chats: Array<ChatType>;\n} | null\n\nexport type ErrorResponseType = {\n  message: string;\n} | null;\n\nexport declare type ChatConnectHandler = (res: ChatConnectResponseType, err: ErrorResponseType) => void;\nexport declare type ChatListConnectHandler = (res: ChatListConnectResponseType, err: ErrorResponseType) => void;\nexport declare type MessageSendHandler = (res: MessageSendResponseType, err: ErrorResponseType) => void;\nexport declare type MessagesFetchHandler = (res: MessagesFetchResponseType, err: ErrorResponseType) => void;\nexport declare type ChatListFetchHandler = (res: ChatListFetchResponseType, err: ErrorResponseType) => void;\nexport declare type MessageReceiveHandler = (res: MessageReceiveResponseType, err: ErrorResponseType) => void;\nexport declare type MessagesUpdateHandler = (res: MessagesUpdateResponseType, err: ErrorResponseType) => void;\nexport declare type ChatListRefreshHandler = (res: ChatListRefreshResponseType, err: ErrorResponseType) => void;\nexport declare type ChatRefreshHandler = (res: ChatRefreshResponseType, err: ErrorResponseType) => void;\n\n\n/**\n * \n  ___             _      _____                  \n  | __|_ _____ _ _| |_ __|_   _|  _ _ __  ___ ___\n  | _|\\ V / -_) ' \\  _|___|| || || | '_ \\/ -_|_-<\n  |___|\\_/\\___|_||_\\__|    |_| \\_, | .__/\\___/__/\n                              |__/|_|           \n\n  */\nexport enum ChattyEvent {\n  CONNECT = 'connection',\n  CONNECT_DONE = 'connect_done',\n  CONNECT_FAIL = 'connect_error',\n\n  DISCONNECT = 'disconnect',\n  DISCONNECT_DONE = 'disconnect_done',\n  DISCONNECT_FAIL = 'disconnect_fail',\n\n  REFRESH_CHAT = 'refresh_chat',\n  REFRESH_CHAT_DONE = 'refresh_chat_done',\n  REFRESH_CHAT_FAIL = 'refresh_chat_fail',\n\n  NEW_MESSAGE = 'new_message',\n\n  FETCH_MESSAGES = 'fetch_messages',\n  FETCH_MESSAGES_DONE = 'fetch_messages_done',\n  FETCH_MESSAGES_FAIL = 'fetch_messages_fail',\n\n  UPDATE_MESSAGES = 'update_message',\n\n  FETCH_CHATLIST = 'fetch_chatlist',\n  FETCH_CHATLIST_DONE = 'fetch_chatlist_done',\n  FETCH_CHATLIST_FAIL = 'fetch_chatlist_fail',\n\n  REFRESH_CHATLIST = 'refresh_chatlist',\n  REFRESH_CHATLIST_DONE = 'refresh_chatlist_done',\n  REFRESH_CHATLIST_FAIL = 'refresh_chatlist_fail',\n\n  SEND_MESSAGE = 'send_message',\n  SEND_MESSAGE_DONE = 'send_message_done',\n  SEND_MESSAGE_FAIL = 'send_message_fail',\n  SEND_MESSAGE_RETRY = 'send_message_retry',\n\n  MARK_AS_READ = 'mark_as_read',\n  MARK_AS_READ_DONE = 'mark_as_read_done',\n  MARK_AS_READ_FAIL = 'mark_as_read_fail',\n  MARK_AS_READ_BYPASS = 'mark_as_read_bypass',\n\n  SYSTEM_MESSAGE = 'systme_message'\n};\n","import {\n  ChatType,\n  MemberType,\n  AppType,\n  FileType,\n  ChatConnectOptions,\n  DeviceType,\n  ChatListFetchOptions,\n  ChatListFetchHandler,\n  MessagesFetchHandler,\n  MessagesUpdateHandler,\n  MessageReceiveHandler,\n  SupportedImageFormat,\n  SupportedVideoFormat,\n  MemberPermissionType,\n  ChatRefreshHandler,\n  ChatListRefreshHandler,\n  ChatConnectHandler,\n  MessageSendHandler,\n  ChatListConnectHandler\n} from './Types';\nimport { Chat } from './Chat';\nimport { ChatList } from './ChatList';\nimport { version } from '../package.json';\n\ninterface InitializeOptions {\n  apiKey: string;\n  member: Partial<MemberType>;\n}\n\ndeclare const MODE: string;\n\nconsole.debug('::: Chatty MODE', MODE);\n\nconst dev = MODE === 'development' ? 'dev' : '';\n\n\nclass Chatty {\n  static apiUrl: string;\n  static apiKey: string | undefined;\n  static app: AppType | undefined;\n  static member: Partial<MemberType> | undefined;\n\n  chatlist: ChatList | null;\n  chat: Chat | null;\n\n  /**\n   * @constructor\n   * @param chattyInstance instance of chatlist in case of moving from chatlist\n   * @description When creating chat instance to update change of chat room to chat list automatically, put chat list instance as a parameter of Chat constructor\n   */\n  constructor(chattyInstance?: Chatty) {\n    if (chattyInstance) {\n      this.chatlist = chattyInstance.chatlist;\n    } else {\n      this.chatlist = new ChatList();\n    }\n    this.chat = new Chat();\n  }\n\n  static async init(initials: InitializeOptions) {\n    this.apiUrl = MODE === 'none' ? 'http://localhost:3000' : `https://${dev}api.chatty-cloud.com`;\n    this.apiKey = initials.apiKey;\n\n    const deviceInfo: DeviceType = {\n      platform: navigator.platform,\n      language: navigator.language,\n      product: navigator.product,\n      userAgent: navigator.userAgent,\n      sdkVersion: version\n    };\n\n    this.member = { ...initials.member, device: deviceInfo };\n\n    await this.updateMember(this.member);\n\n    if (!this.member) {\n      console.warn('::: Chatty INIT Fail');\n    } else {\n      console.info('::: Chatty INIT Success');\n    }\n  }\n\n  static async exit() {\n    if (this.member) {\n      await this.updateMember({ deviceToken: '' });\n    }\n    this.apiKey = undefined;\n    this.app = undefined;\n    this.member = undefined;\n  }\n\n\n\n\n  /**\n   \n        __          __  ___      __ \n  _____/ /_  ____ _/ /_/ (_)____/ /_\n / ___/ __ \\/ __ `/ __/ / / ___/ __/\n/ /__/ / / / /_/ / /_/ / (__  ) /_  \n\\___/_/ /_/\\__,_/\\__/_/_/____/\\__/  \n                                    \n\n   */\n\n  connectChatList() {\n    if (!this.chatlist) {\n      console.warn('::: Chatty ChatList instance is not exist');\n      return;\n    }\n    this.chatlist.connect();\n  }\n  disconnectChatList() {\n    if (!this.chatlist) {\n      console.warn('::: Chatty ChatList instance is not exist');\n      return;\n    }\n    this.chatlist.disconnect();\n    this.chatlist = null;\n  }\n  fetchChatList(options: ChatListFetchOptions) {\n    if (!this.chatlist) {\n      console.warn('::: Chatty ChatList instance is not exist');\n      return;\n    }\n    if (!options) {\n      console.warn('::: Chatty fetchChatList error: Please check params options whether it is null or not');\n      return;\n    }\n    this.chatlist.fetchChatList(options);\n  }\n  refreshChatList(ChatId: string) {\n    if (!this.chatlist) {\n      console.warn('::: Chatty refreshChatList error: ChatList instance is not exist');\n      return;\n    }\n    if (!ChatId) {\n      console.warn('::: Chatty refreshChatList error: Please check params ChatId whether it is null or not');\n      return;\n    }\n    this.chatlist.refreshChatList(ChatId);\n  }\n\n\n\n  /**\n \n        __          __  ___      __        __                    ____         \n  _____/ /_  ____ _/ /_/ (_)____/ /_      / /_  ____ _____  ____/ / /__  _____\n / ___/ __ \\/ __ `/ __/ / / ___/ __/_____/ __ \\/ __ `/ __ \\/ __  / / _ \\/ ___/\n/ /__/ / / / /_/ / /_/ / (__  ) /_/_____/ / / / /_/ / / / / /_/ / /  __/ /    \n\\___/_/ /_/\\__,_/\\__/_/_/____/\\__/     /_/ /_/\\__,_/_/ /_/\\__,_/_/\\___/_/     \n                                                                            \n\n  */\n\n  onChatListConnect(handler: ChatListConnectHandler) {\n    if (!this.chatlist) {\n      throw new ChattyException('E4001');\n    }\n    this.chatlist.onConnectHandler(handler);\n  }\n  onChatListFetch(handler: ChatListFetchHandler) {\n    if (!this.chatlist) {\n      throw new ChattyException('E4001');\n    }\n    this.chatlist.onFetchChatListHandler(handler);\n  }\n  onChatListRefresh(handler: ChatListRefreshHandler) {\n    if (!this.chatlist) {\n      throw new ChattyException('E4001');\n    }\n    this.chatlist.onRefreshChatListHandler(handler);\n  }\n\n\n\n\n\n\n  /**\n   \n        __          __ \n  _____/ /_  ____ _/ /_\n / ___/ __ \\/ __ `/ __/\n/ /__/ / / / /_/ / /_  \n\\___/_/ /_/\\__,_/\\__/  \n                       \n\n   */\n  connectChat(options: ChatConnectOptions) {\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n    this.chat.connect(options, this.chatlist);\n  }\n  disconnectChat() {\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n    this.chat.disconnect();\n    this.chat = null;\n  }\n  fetchMessages(refresh: boolean) {\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n    this.chat.fetchMessages(refresh);\n  }\n  sendTextMessage(text: string) {\n    if (!text) {\n      throw new ChattyException('E1001');\n    }\n\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n\n    if (!Chatty.member) {\n      throw new ChattyException('E2001');\n    }\n\n    // 실제 저장이 되지 않은상태에서 chat 에서 보여져야 하기에 message id 가 여기서 부여되어야 함\n\n    const message = {\n      id: 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) { var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); return v.toString(16); }),\n      createdAt: new Date(),\n      text: text,\n      type: 'TEXT',\n      by: 'USER',\n      SenderId: Chatty.member.id,\n      // Sender: {\n      //   id: Chatty.member.id\n      // }\n    }\n    this.chat.sendMessage(message);\n\n    // return temporary message object before inserting to database\n    return message;\n  }\n\n  sendFileMessage(files: Array<FileType>) {\n    if (!files) {\n      throw new ChattyException('E1001');\n    }\n\n    if (files.length > 4) {\n      throw new ChattyException('E1006');\n    }\n\n    if (!this.chat || !this.chat.id) {\n      throw new ChattyException('E4002');\n    }\n\n    if (!Chatty.member) {\n      throw new ChattyException('E2001');\n    }\n\n\n    // 실제 저장이 되지 않은상태에서 chat 에서 보여져야 하기에 message id 가 여기서 부여되어야 함\n\n    const message = {\n      id: 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) { var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8); return v.toString(16); }),\n      createdAt: new Date(),\n      files: files,\n      text: 'File Message',\n      type: 'FILE',\n      by: 'USER',\n      SenderId: Chatty.member.id,\n      Sender: {\n        id: Chatty.member.id\n      }\n    }\n\n    Chatty.uploadFileCF(files)\n      .then((files) => {\n        if (!this.chat) {\n          throw new ChattyException('E2002');\n        }\n        this.chat.sendMessage({ ...message, files: files });\n      })\n      .catch((err) => {\n        console.error(err);\n      })\n\n    // return temporary message object before inserting to database\n    return message;\n  }\n\n  refreshChat(ChatId: string) {\n    if (!ChatId) {\n      throw new ChattyException('E1001');\n    }\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n\n    this.chat.refreshChat(ChatId);\n  }\n\n\n  /**\n   \n        __          __        __                    ____         \n  _____/ /_  ____ _/ /_      / /_  ____ _____  ____/ / /__  _____\n / ___/ __ \\/ __ `/ __/_____/ __ \\/ __ `/ __ \\/ __  / / _ \\/ ___/\n/ /__/ / / / /_/ / /_/_____/ / / / /_/ / / / / /_/ / /  __/ /    \n\\___/_/ /_/\\__,_/\\__/     /_/ /_/\\__,_/_/ /_/\\__,_/_/\\___/_/     \n                                                                 \n\n   */\n  onChatConnect(handler: ChatConnectHandler) {\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n    this.chat.onConnectHandler(handler);\n  }\n  onMessageSend(handler: MessageSendHandler) {\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n    this.chat.onSendMessageHandler(handler);\n  }\n  onMessagesFetch(handler: MessagesFetchHandler) {\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n    this.chat.onFetchMessagesHandler(handler);\n  }\n  onMessagesUpdate(handler: MessagesUpdateHandler) {\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n    this.chat.onUpdateMessagesHandler(handler);\n  }\n  onMessageReceive(handler: MessageReceiveHandler) {\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n    this.chat.onNewMessageHandler(handler);\n  }\n  onChatRefresh(handler: ChatRefreshHandler) {\n    if (!this.chat) {\n      throw new ChattyException('E4002');\n    }\n    this.chat.onRefreshChatHandler(handler);\n  }\n\n\n\n\n\n\n\n  /**\n   \n         __        __  _            ____                 __  _                 \n   _____/ /_____ _/ /_(_)____      / __/_  ______  _____/ /_(_)___  ____  _____\n  / ___/ __/ __ `/ __/ / ___/_____/ /_/ / / / __ \\/ ___/ __/ / __ \\/ __ \\/ ___/\n (__  ) /_/ /_/ / /_/ / /__/_____/ __/ /_/ / / / / /__/ /_/ / /_/ / / / (__  ) \n/____/\\__/\\__,_/\\__/_/\\___/     /_/  \\__,_/_/ /_/\\___/\\__/_/\\____/_/ /_/____/  \n                                                                               \n\n  */\n\n  static generateDistinctKey(data: Array<string> | string) {\n    if (!data || (Array.isArray(data) && data.length < 1)) {\n      throw new ChattyException('E1001');\n    }\n\n    if (Array.isArray(data)) {\n      data.sort();\n    }\n\n    const MD5 = function (d) { const result = M(V(Y(X(d), 8 * d.length))); return result.toLowerCase() }; function M(d) { for (var _, m = \"0123456789ABCDEF\", f = \"\", r = 0; r < d.length; r++)_ = d.charCodeAt(r), f += m.charAt(_ >>> 4 & 15) + m.charAt(15 & _); return f } function X(d) { for (var _ = Array(d.length >> 2), m = 0; m < _.length; m++)_[m] = 0; for (m = 0; m < 8 * d.length; m += 8)_[m >> 5] |= (255 & d.charCodeAt(m / 8)) << m % 32; return _ } function V(d) { for (var _ = \"\", m = 0; m < 32 * d.length; m += 8)_ += String.fromCharCode(d[m >> 5] >>> m % 32 & 255); return _ } function Y(d, _) { d[_ >> 5] |= 128 << _ % 32, d[14 + (_ + 64 >>> 9 << 4)] = _; for (var m = 1732584193, f = -271733879, r = -1732584194, i = 271733878, n = 0; n < d.length; n += 16) { var h = m, t = f, g = r, e = i; f = md5_ii(f = md5_ii(f = md5_ii(f = md5_ii(f = md5_hh(f = md5_hh(f = md5_hh(f = md5_hh(f = md5_gg(f = md5_gg(f = md5_gg(f = md5_gg(f = md5_ff(f = md5_ff(f = md5_ff(f = md5_ff(f, r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 0], 7, -680876936), f, r, d[n + 1], 12, -389564586), m, f, d[n + 2], 17, 606105819), i, m, d[n + 3], 22, -1044525330), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 4], 7, -176418897), f, r, d[n + 5], 12, 1200080426), m, f, d[n + 6], 17, -1473231341), i, m, d[n + 7], 22, -45705983), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 8], 7, 1770035416), f, r, d[n + 9], 12, -1958414417), m, f, d[n + 10], 17, -42063), i, m, d[n + 11], 22, -1990404162), r = md5_ff(r, i = md5_ff(i, m = md5_ff(m, f, r, i, d[n + 12], 7, 1804603682), f, r, d[n + 13], 12, -40341101), m, f, d[n + 14], 17, -1502002290), i, m, d[n + 15], 22, 1236535329), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 1], 5, -165796510), f, r, d[n + 6], 9, -1069501632), m, f, d[n + 11], 14, 643717713), i, m, d[n + 0], 20, -373897302), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 5], 5, -701558691), f, r, d[n + 10], 9, 38016083), m, f, d[n + 15], 14, -660478335), i, m, d[n + 4], 20, -405537848), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 9], 5, 568446438), f, r, d[n + 14], 9, -1019803690), m, f, d[n + 3], 14, -187363961), i, m, d[n + 8], 20, 1163531501), r = md5_gg(r, i = md5_gg(i, m = md5_gg(m, f, r, i, d[n + 13], 5, -1444681467), f, r, d[n + 2], 9, -51403784), m, f, d[n + 7], 14, 1735328473), i, m, d[n + 12], 20, -1926607734), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 5], 4, -378558), f, r, d[n + 8], 11, -2022574463), m, f, d[n + 11], 16, 1839030562), i, m, d[n + 14], 23, -35309556), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 1], 4, -1530992060), f, r, d[n + 4], 11, 1272893353), m, f, d[n + 7], 16, -155497632), i, m, d[n + 10], 23, -1094730640), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 13], 4, 681279174), f, r, d[n + 0], 11, -358537222), m, f, d[n + 3], 16, -722521979), i, m, d[n + 6], 23, 76029189), r = md5_hh(r, i = md5_hh(i, m = md5_hh(m, f, r, i, d[n + 9], 4, -640364487), f, r, d[n + 12], 11, -421815835), m, f, d[n + 15], 16, 530742520), i, m, d[n + 2], 23, -995338651), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 0], 6, -198630844), f, r, d[n + 7], 10, 1126891415), m, f, d[n + 14], 15, -1416354905), i, m, d[n + 5], 21, -57434055), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 12], 6, 1700485571), f, r, d[n + 3], 10, -1894986606), m, f, d[n + 10], 15, -1051523), i, m, d[n + 1], 21, -2054922799), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 8], 6, 1873313359), f, r, d[n + 15], 10, -30611744), m, f, d[n + 6], 15, -1560198380), i, m, d[n + 13], 21, 1309151649), r = md5_ii(r, i = md5_ii(i, m = md5_ii(m, f, r, i, d[n + 4], 6, -145523070), f, r, d[n + 11], 10, -1120210379), m, f, d[n + 2], 15, 718787259), i, m, d[n + 9], 21, -343485551), m = safe_add(m, h), f = safe_add(f, t), r = safe_add(r, g), i = safe_add(i, e) } return Array(m, f, r, i) } function md5_cmn(d, _, m, f, r, i) { return safe_add(bit_rol(safe_add(safe_add(_, d), safe_add(f, i)), r), m) } function md5_ff(d, _, m, f, r, i, n) { return md5_cmn(_ & m | ~_ & f, d, _, r, i, n) } function md5_gg(d, _, m, f, r, i, n) { return md5_cmn(_ & f | m & ~f, d, _, r, i, n) } function md5_hh(d, _, m, f, r, i, n) { return md5_cmn(_ ^ m ^ f, d, _, r, i, n) } function md5_ii(d, _, m, f, r, i, n) { return md5_cmn(m ^ (_ | ~f), d, _, r, i, n) } function safe_add(d, _) { var m = (65535 & d) + (65535 & _); return (d >> 16) + (_ >> 16) + (m >> 16) << 16 | 65535 & m } function bit_rol(d, _) { return d << _ | d >>> 32 - _ }\n\n    return MD5(JSON.stringify(data));\n  }\n\n  static async createChat(payload) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!payload) {\n          throw new ChattyException('E1001');\n        }\n\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/chat`, {\n          method: 'POST',\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  static updateChat(chat: ChatType) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!chat) {\n          throw new ChattyException('E1001');\n        }\n\n        if (!chat.id) {\n          throw new ChattyException('E2005');\n        }\n\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl) {\n          throw new ChattyException('E2001');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/chat/${chat.id}`, {\n          method: 'PUT',\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  /**\n   * @description\n   * non-socket(API call) 방식으로 message를 생성하는 함수\n   * 두번째 인자를 통해 system message 와 user message로 구분한다\n   * api server에서는 message가 발생하면 chat Members 에게 data push를 보낸다.\n   * client 의 Chat socket에서는 이 push가 오면 fetchMessages를 호출해서 Chat을 업데이트해야한다.\n   * @param message \n   * @param system \n   * @returns \n   */\n  static async createMessage(message, system?: boolean) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!message) {\n          throw new ChattyException('E1001');\n        }\n        if (!message.ChatId) {\n          throw new ChattyException('E2005');\n        }\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        message.by = system ? 'SYSTEM' : 'USER';\n\n        const response = await fetch(`${Chatty.apiUrl}/message`, {\n          method: 'POST',\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(message)\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  static async getMissedTotalCount() {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl || !Chatty.member) {\n          throw new ChattyException('E2001');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/missed/${Chatty.member.id}`, {\n          method: 'GET',\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n  static getMembersByGroup(group: string) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!group) {\n          throw new ChattyException('E1001');\n        }\n\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl) {\n          throw new ChattyException('E2001');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/members?group=${group}`, {\n          method: 'GET',\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n  /**\n   * \n   * @param member \n   */\n  static async updateMember(member: Partial<MemberType>): Promise<MemberType> {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!member) {\n          throw new ChattyException('E1001');\n        }\n\n        if (!member.id || !member.name) {\n          throw new ChattyException('E1007');\n        }\n\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl || !Chatty.member) {\n          throw new ChattyException('E2001');\n        }\n\n        if (member.id && member.id !== Chatty.member.id) {\n          throw new ChattyException('E2004');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/member/${Chatty.member.id}`, {\n          method: 'PUT',\n          body: JSON.stringify(member),\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (response.ok) {\n          const member: MemberType & { App?: AppType } = await response.json();\n\n          if (member) {\n            Chatty.app = member.App;\n            delete member['App'];\n            Chatty.member = member;\n          }\n\n          resolve(member);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  /** \n   * @deprecated\n   */\n  static async changeMemberPermission(MemberId: string, permission: MemberPermissionType) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!MemberId || !permission) {\n          throw new ChattyException('E1001');\n        }\n\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl || !Chatty.member) {\n          throw new ChattyException('E2001');\n        }\n\n        if (Chatty.member.permission! < MemberPermissionType.ADMIN) {\n          throw new ChattyException('E2003');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/member/${MemberId}`, {\n          method: 'PUT',\n          body: JSON.stringify({ permission: permission }),\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          }\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n  static async deleteMember(MemberId: string) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!MemberId) {\n          throw new ChattyException('E1001');\n        }\n\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl || !Chatty.member) {\n          throw new ChattyException('E2001');\n        }\n\n        if (Chatty.member.permission! < MemberPermissionType.ADMIN) {\n          throw new ChattyException('E2003');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/member/${MemberId}`, {\n          method: 'DELETE',\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  static async fileCheckValidation(files: Array<FileType>) {\n    await Promise.all(files.map(async (file: any) => {\n      if (!Chatty.app) {\n        throw new ChattyException('E2001');\n      }\n      if (!file.type) {\n        throw new ChattyException('E1002');\n      }\n      if (file.type.split('/')[0] === 'image' && !Chatty.app.enableImageUpload) {\n        throw new ChattyException('E1003');\n      }\n\n      if (file.type.split('/')[0] === 'video' && !Chatty.app.enableVideoUpload) {\n        throw new ChattyException('E1004');\n      }\n\n      if (file.type.split('/')[0] === 'image' && !SupportedImageFormat.includes(file.type)) {\n        throw new ChattyException('E1005');\n      }\n\n      if (file.type.split('/')[0] === 'video' && !SupportedVideoFormat.includes(file.type)) {\n        throw new ChattyException('E1005');\n      }\n    }));\n  }\n  /**\n   * \n   * @param file \n   * @returns \n   */\n  static async uploadFileCF(files: Array<FileType>): Promise<Array<{ uri: string } | undefined>> {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!files || !files.length) {\n          throw new ChattyException('E1001');\n        }\n\n        Chatty.fileCheckValidation(files);\n\n        const CF_DELIVERY: string = 'https://imagedelivery.net/Se1RT11x0rciKkirEISyIg';\n\n        const result = await Promise.all(files.map(async (file: any) => {\n          if (!Chatty.apiKey) {\n            throw new ChattyException('E2000');\n          }\n\n          const signedurl = await fetch('/uploadurl', {\n            method: 'GET',\n            headers: {\n              token: Chatty.apiKey,\n              'Content-Type': 'application/json'\n            }\n          });\n\n          if (signedurl.ok) {\n            const json = await signedurl.json();\n            const form = new FormData();\n            form.append('file', file);\n            // const resp = await fetch(file.uri);\n            // const blob = await resp.blob();\n            const uploadUrl = json.data;\n            const uploadResult = await fetch(uploadUrl, {\n              method: 'POST',\n              body: form\n            });\n            if (uploadResult.ok) {\n              const json = await uploadResult.json();\n              return { uri: `${CF_DELIVERY}/${json.result.id}/${Chatty.app?.thumbnailSize}` };\n            } else {\n              throw new ChattyException('E3002', 'Uploading image file failed');\n            }\n          } else {\n            throw new ChattyException('E3002', 'Get SignedUrl for image uploading failed');\n          }\n        }));\n        resolve(result);\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  /**\n   * \n   * @deprecated\n   * @param file \n   * @param ChatId \n   * @returns \n   */\n  static async uploadFile(file: any, ChatId: string): Promise<any> {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl || !Chatty.member) {\n          reject('::: Chatty was not initialized. Please call init function first');\n          return;\n        }\n\n        if (!Chatty.app) {\n          console.warn('::: Chatty uploadFile error - App is not defined, Please check your chatty init');\n          reject();\n          return;\n        }\n\n        if (!file.type || !file.size) {\n          console.warn(`::: Chatty uploadFile error - Information of file type or file size does not existed`);\n          reject(`Information of file type or file size does not existed`);\n          return;\n        }\n        if (file.type.split('/')[0] === 'image' && !Chatty.app.enableImageUpload) {\n          console.warn(`::: Chatty uploadFile error - Image file type is not supported. please check your app setting in chatty-cloud dashboard`);\n          reject(`Image file is not supported`);\n          return;\n        }\n\n        if (file.type.split('/')[0] === 'video' && !Chatty.app.enableVideoUpload) {\n          console.warn(`::: Chatty uploadFile error - Video file type is not supported. please check your app setting in chatty-cloud dashboard`);\n          reject(`Video file is not supported`);\n          return;\n        }\n\n        if (file.type.split('/')[0] === 'image' && !SupportedImageFormat.includes(file.type)) {\n          console.warn(`::: Chatty uploadFile error - ${file.type} is not supported.`);\n          reject(`${file.type} is not supported`);\n          return;\n        }\n\n        if (file.type.split('/')[0] === 'video' && !SupportedVideoFormat.includes(file.type)) {\n          console.warn(`::: Chatty uploadFile error - ${file.type} is not supported.`);\n          reject(`${file.type} is not supported`);\n          return;\n        }\n\n        if (file.type.split('/')[0] === 'image' && file.size > Chatty.app.maxImageSize!) {\n          console.warn('::: Chatty uploadFile error - Please check your maximum image file size. please check your app setting in chatty-cloud dashboard');\n          reject(`Please check your maximum image file size`);\n          return;\n        }\n\n        if (file.type.split('/')[0] === 'video' && file.size > Chatty.app.maxVideoSize!) {\n          console.warn('::: Chatty uploadFile error - Please check your maximum video file size. please check your app setting in chatty-cloud dashboard');\n          reject(`Please check your maximum video file size`);\n          return;\n        }\n\n        const url: string = 'https://file.chatty-cloud.com/uploader';\n        const cdnUrl: string = 'https://cdn.chatty-cloud.com';\n        const filename: string = `${Chatty.app.name}/${ChatId}/${Chatty.member.id}/Chatty_${new Date().toISOString()}.${file.type.split('/')[1]}`;\n\n        const response = await fetch(`${url}?filename=${filename}&filetype=${file.type}`); // s3 bucket이 public이 아니기 때문에 이걸사용하면 403 error\n\n        if (response.ok) {\n          const json = await response.json();\n          console.debug('::: Chatty getSignedUrl success', json);\n\n          const resp = await fetch(file.uri);\n          const blob = await resp.blob();\n\n          const responsePut = await fetch(json.uploadURL, { method: 'PUT', body: blob });\n          if (responsePut.ok) {\n            console.debug('::: Chatty Upload to s3 success', responsePut);\n\n            // FOR CDN CACHING\n            await fetch(cdnUrl + `/thumb/${Chatty.app.thumbnailSize}/${filename}`, { method: 'GET' });\n\n            resolve({\n              uri: cdnUrl + `/${filename}`,\n              type: file.type,\n              name: file.name,\n              thumbnail: cdnUrl + `/thumb/${Chatty.app.thumbnailSize}/${filename}`\n            });\n          } else {\n            console.warn('::: Chatty Upload to s3 error', responsePut);\n            reject();\n          }\n        } else {\n          const json = await response.json();\n          console.warn('::: Chatty getSignedUrl fail', json);\n          reject();\n        }\n      } catch (err) {\n        reportError(err);\n        reject(err);\n      }\n    });\n  }\n\n  static async joinChat(ChatId: string) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!ChatId) {\n          throw new ChattyException('E1001');\n        }\n\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl || !Chatty.member) {\n          throw new ChattyException('E2001');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/chatmember/join`, {\n          method: 'POST',\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            ChatId: ChatId,\n            MemberId: Chatty.member.id\n          })\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  static async leaveChat(ChatId: string) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!ChatId) {\n          throw new ChattyException('E1001');\n        }\n\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl || !Chatty.member) {\n          throw new ChattyException('E2001');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/chatmember/leave`, {\n          method: 'DELETE',\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            ChatId: ChatId,\n            MemberId: Chatty.member.id\n          })\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  static async inviteMembers(ChatId: string, MemberIds: Array<string>) {\n    return new Promise(async (resolve, reject) => {\n      // invite members는 non-socket api \n      // invite 대상자에게는 push 알림이 가고\n      // 기존의 chat member들에게는 data push가 간다.\n      try {\n        if (!ChatId || !MemberIds) {\n          throw new ChattyException('E1001');\n        }\n\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl) {\n          throw new ChattyException('E2001');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/chatmember/invite`, {\n          method: 'POST',\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            ChatId: ChatId,\n            MemberIds: MemberIds\n          })\n        });\n\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n  static async excludeMembers(ChatId: string, MemberIds: Array<string>) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!ChatId || !MemberIds) {\n          throw new ChattyException('E1001');\n        }\n\n        if (!Chatty.apiKey) {\n          throw new ChattyException('E2000');\n        }\n\n        if (!Chatty.apiUrl) {\n          throw new ChattyException('E2001');\n        }\n\n        const response = await fetch(`${Chatty.apiUrl}/chatmember/exclude`, {\n          method: 'DELETE',\n          headers: {\n            token: Chatty.apiKey,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            ChatId: ChatId,\n            MemberIds: MemberIds\n          })\n        });\n        if (response.ok) {\n          const data = await response.json();\n          resolve(data);\n        } else {\n          const json = await response.json();\n          throw new ChattyException('E3001', JSON.stringify({ status: response.status, statusText: response.statusText, json: json }));\n        }\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n\n}\n\nexport const ERR = {\n  E1001: 'Chatty error - Check function parameters are proper',\n  E1002: 'Chatty error - Check type of files parameters exist or not',\n  E1003: 'Chatty error - Image upload not supported. configure your app setting in chatty-cloud dashboard',\n  E1004: 'Chatty error - Video upload not supported. configure your app setting in chatty-cloud dashboard',\n  E1005: 'Chatty error - Upload file format not supported',\n  E1006: 'Chatty error - Maximum count of uploading files is 4. more than 4 is not allowed',\n  E1007: \"Chatty error - Check payload of member in init function. id and name should be passed\",\n  E2000: 'Chatty error - App Key is not valid. Please check apiKey param of Chatty.init function in your source code',\n  E2001: 'Chatty error - Check Chatty class was initialized',\n  E2002: 'Chatty error - Chat instance does not exist',\n  E2003: 'Chatty error - Member permission not allwed',\n  E2004: 'Chatty error - Member id does not match',\n  E2005: 'Chatty error - Chat id does not exist in payload',\n  E3001: 'Chatty API error - ',\n  E3002: 'Chatty API error - ',\n  E4001: 'ChatList Socket error - Check chatlist instance was created or not',\n  E4002: 'Chat Socket error - Check chat instance was created or not',\n  E4003: 'ChatList Socket error - Check chatlist socket connection',\n  E4004: 'Chat Socket error - Check chat socket connection',\n  E4005: 'ChatList Socket error - Check chatlist handler is not initialized. handler: ',\n  E4006: 'Chat Socket error - Check chat handler is not initialized. handler: ',\n  E4007: `Chat Socket error - ChatConnectOptions should have one of 'at' or 'with'`,\n  E4008: `Chat Socket error - When connect with 'with' options, minimum two MemberId are need`,\n}\n\n\nexport class ChattyException extends Error {\n  errorCode: string;\n  constructor(errorCode: string, customMessage?: string) {\n    let message;\n\n    switch (errorCode) {\n      case 'E1001':\n        message = `Chatty error - Check function parameters are proper`;\n        break;\n      case 'E1002':\n        message = `Chatty error - Check type of files parameters exist or not`;\n        break;\n      case 'E1003':\n        message = `Chatty error - Image upload not supported. configure your app setting in chatty-cloud dashboard`;\n        break;\n      case 'E1004':\n        message = `Chatty error - Video upload not supported. configure your app setting in chatty-cloud dashboard`;\n        break;\n      case 'E1005':\n        message = `Chatty error - Upload file format not supported`;\n        break;\n      case 'E1006':\n        message = `Chatty error - Maximum count of uploading files is 4. more than 4 is not allowed`;\n        break;\n      case 'E1007':\n        message = `Chatty error - Check payload of member in init function. id and name should be passed`;\n        break;\n\n      case 'E2000':\n        message = `Chatty error - App Key is not valid. Please check apiKey param of Chatty.init function in your source code`;\n        break;\n      case 'E2001':\n        message = `Chatty error - Check Chatty class was initialized`;\n        break;\n      case 'E2002':\n        message = `Chatty error - Chat instance does not exist`;\n        break;\n      case 'E2003':\n        message = `Chatty error - Member permission not allwed`;\n        break;\n      case 'E2004':\n        message = `Chatty error - Member id does not match`;\n        break;\n      case 'E2005':\n        message = `Chatty error - Chat id does not exist in payload`;\n        break;\n\n      case 'E3001':\n        message = `Chatty API error - ${customMessage}`;\n        break;\n      case 'E3002':\n        message = `Chatty API error - ${customMessage}`;\n        break;\n\n      case 'E4001':\n        message = `ChatList Socket error - Check chatlist instance was created or not`;\n        break;\n      case 'E4002':\n        message = `Chat Socket error - Check chat instance was created or not`;\n        break;\n      case 'E4003':\n        message = `ChatList Socket error - Check chatlist socket connection`;\n        break;\n      case 'E4004':\n        message = `Chat Socket error - Check chat socket connection`;\n        break;\n      case 'E4005':\n        message = `ChatList Socket error - Check chatlist handler is not initialized. handler: ${customMessage}`;\n        break;\n      case 'E4006':\n        message = `Chat Socket error - Check chat handler is not initialized. handler: ${customMessage}`;\n        break;\n      case 'E4007':\n        message = `Chat Socket error - ChatConnectOptions should have one of 'at' or 'with'`;\n        break;\n      case 'E4008':\n        message = `Chat Socket error - When connect with 'with' options, minimum two MemberId are need`;\n        break;\n\n      default:\n        message = `Chatty Unknown error ${customMessage}`;\n        break;\n    }\n\n    super(message);\n\n    // Object.setPrototypeOf(this, new.target.prototype);\n\n    this.errorCode = errorCode;\n\n    console.error(errorCode, message);\n\n    reportError({\n      errorCode: errorCode,\n      errorMessage: message,\n      platform: navigator.platform,\n      language: navigator.language,\n      product: navigator.product,\n      userAgent: navigator.userAgent,\n      sdkVersion: version\n    });\n  }\n}\n\n\nfunction reportError(err) {\n  fetch(`${Chatty.apiUrl}/misc/sendmail`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      token: Chatty.apiKey || '',\n    },\n    body: JSON.stringify({\n      type: 'SDK ERROR',\n      message: JSON.stringify(err)\n    })\n  });\n}\n\nexport * as ChattyTypes from './Types';\n\nexport default Chatty;","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.installTimerFunctions = exports.transports = exports.Transport = exports.protocol = exports.Socket = void 0;\nconst socket_js_1 = require(\"./socket.js\");\nObject.defineProperty(exports, \"Socket\", { enumerable: true, get: function () { return socket_js_1.Socket; } });\nexports.protocol = socket_js_1.Socket.protocol;\nvar transport_js_1 = require(\"./transport.js\");\nObject.defineProperty(exports, \"Transport\", { enumerable: true, get: function () { return transport_js_1.Transport; } });\nvar index_js_1 = require(\"./transports/index.js\");\nObject.defineProperty(exports, \"transports\", { enumerable: true, get: function () { return index_js_1.transports; } });\nvar util_js_1 = require(\"./util.js\");\nObject.defineProperty(exports, \"installTimerFunctions\", { enumerable: true, get: function () { return util_js_1.installTimerFunctions; } });\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = void 0;\nconst index_js_1 = require(\"./transports/index.js\");\nconst util_js_1 = require(\"./util.js\");\nconst parseqs_1 = __importDefault(require(\"parseqs\"));\nconst parseuri_1 = __importDefault(require(\"parseuri\"));\nconst debug_1 = __importDefault(require(\"debug\")); // debug()\nconst component_emitter_1 = require(\"@socket.io/component-emitter\");\nconst engine_io_parser_1 = require(\"engine.io-parser\");\nconst debug = (0, debug_1.default)(\"engine.io-client:socket\"); // debug()\nclass Socket extends component_emitter_1.Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri or options\n     * @param {Object} opts - options\n     * @api public\n     */\n    constructor(uri, opts = {}) {\n        super();\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = (0, parseuri_1.default)(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = (0, parseuri_1.default)(opts.host).host;\n        }\n        (0, util_js_1.installTimerFunctions)(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\"polling\", \"websocket\"];\n        this.readyState = \"\";\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024\n            },\n            transportOptions: {},\n            closeOnBeforeunload: true\n        }, opts);\n        this.opts.path = this.opts.path.replace(/\\/$/, \"\") + \"/\";\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = parseqs_1.default.decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                addEventListener(\"beforeunload\", () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                }, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\");\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} transport name\n     * @return {Transport}\n     * @api private\n     */\n    createTransport(name) {\n        debug('creating transport \"%s\"', name);\n        const query = clone(this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = engine_io_parser_1.protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts.transportOptions[name], this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port\n        });\n        debug(\"options: %j\", opts);\n        return new index_js_1.transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @api private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            debug(\"error while creating transport: %s\", e);\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @api private\n     */\n    setTransport(transport) {\n        debug(\"setting transport %s\", transport.name);\n        if (this.transport) {\n            debug(\"clearing existing transport %s\", this.transport.name);\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", () => {\n            this.onClose(\"transport close\");\n        });\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} transport name\n     * @api private\n     */\n    probe(name) {\n        debug('probing transport \"%s\"', name);\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            debug('probe transport \"%s\" opened', name);\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", msg => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    debug('probe transport \"%s\" pong', name);\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    debug('pausing current transport \"%s\"', this.transport.name);\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        debug(\"changing transport and sending upgrade packet\");\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    debug('probe transport \"%s\" failed', name);\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = err => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            debug('probe transport \"%s\" failed because of error: %s', name, err);\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        transport.open();\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @api private\n     */\n    onOpen() {\n        debug(\"socket open\");\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState &&\n            this.opts.upgrade &&\n            this.transport.pause) {\n            debug(\"starting upgrade probes\");\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @api private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.resetPingTimeout();\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n            debug('packet received with socket readyState \"%s\"', this.readyState);\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @api private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @api private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @api private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @api private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            debug(\"flushing %d packets in socket\", this.writeBuffer.length);\n            this.transport.send(this.writeBuffer);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = this.writeBuffer.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} message.\n     * @param {Function} callback function.\n     * @param {Object} options.\n     * @return {Socket} for chaining.\n     * @api public\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @api private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     *\n     * @api public\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            debug(\"socket closing - telling transport to close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @api private\n     */\n    onError(err) {\n        debug(\"socket error %j\", err);\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @api private\n     */\n    onClose(reason, desc) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            debug('socket close with reason: \"%s\"', reason);\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, desc);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} server upgrades\n     * @api private\n     *\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nexports.Socket = Socket;\nSocket.protocol = engine_io_parser_1.protocol;\nfunction clone(obj) {\n    const o = {};\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            o[i] = obj[i];\n        }\n    }\n    return o;\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transport = void 0;\nconst engine_io_parser_1 = require(\"engine.io-parser\");\nconst component_emitter_1 = require(\"@socket.io/component-emitter\");\nconst util_js_1 = require(\"./util.js\");\nconst debug_1 = __importDefault(require(\"debug\")); // debug()\nconst debug = (0, debug_1.default)(\"engine.io-client:transport\"); // debug()\nclass Transport extends component_emitter_1.Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} options.\n     * @api private\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        (0, util_js_1.installTimerFunctions)(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.readyState = \"\";\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} str\n     * @return {Transport} for chaining\n     * @api protected\n     */\n    onError(msg, desc) {\n        const err = new Error(msg);\n        // @ts-ignore\n        err.type = \"TransportError\";\n        // @ts-ignore\n        err.description = desc;\n        super.emit(\"error\", err);\n        return this;\n    }\n    /**\n     * Opens the transport.\n     *\n     * @api public\n     */\n    open() {\n        if (\"closed\" === this.readyState || \"\" === this.readyState) {\n            this.readyState = \"opening\";\n            this.doOpen();\n        }\n        return this;\n    }\n    /**\n     * Closes the transport.\n     *\n     * @api public\n     */\n    close() {\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     * @api public\n     */\n    send(packets) {\n        if (\"open\" === this.readyState) {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n            debug(\"transport is not open, discarding packets\");\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @api protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emit(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @api protected\n     */\n    onData(data) {\n        const packet = (0, engine_io_parser_1.decodePacket)(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @api protected\n     */\n    onPacket(packet) {\n        super.emit(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @api protected\n     */\n    onClose() {\n        this.readyState = \"closed\";\n        super.emit(\"close\");\n    }\n}\nexports.Transport = Transport;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.transports = void 0;\nconst polling_xhr_js_1 = require(\"./polling-xhr.js\");\nconst websocket_js_1 = require(\"./websocket.js\");\nexports.transports = {\n    websocket: websocket_js_1.WS,\n    polling: polling_xhr_js_1.XHR\n};\n","\"use strict\";\n/* global attachEvent */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Request = exports.XHR = void 0;\nconst xmlhttprequest_js_1 = __importDefault(require(\"./xmlhttprequest.js\"));\nconst debug_1 = __importDefault(require(\"debug\")); // debug()\nconst globalThis_js_1 = __importDefault(require(\"../globalThis.js\"));\nconst util_js_1 = require(\"../util.js\");\nconst component_emitter_1 = require(\"@socket.io/component-emitter\");\nconst polling_js_1 = require(\"./polling.js\");\nconst debug = (0, debug_1.default)(\"engine.io-client:polling-xhr\"); // debug()\n/**\n * Empty function\n */\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new xmlhttprequest_js_1.default({\n        xdomain: false\n    });\n    return null != xhr.responseType;\n})();\nclass XHR extends polling_js_1.Polling {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @api public\n     */\n    constructor(opts) {\n        super(opts);\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n            this.xs = opts.secure !== isSSL;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @api private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, xs: this.xs }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @api private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", err => {\n            this.onError(\"xhr post error\", err);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @api private\n     */\n    doPoll() {\n        debug(\"xhr poll\");\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", err => {\n            this.onError(\"xhr poll error\", err);\n        });\n        this.pollXhr = req;\n    }\n}\nexports.XHR = XHR;\nclass Request extends component_emitter_1.Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @api public\n     */\n    constructor(uri, opts) {\n        super();\n        (0, util_js_1.installTimerFunctions)(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.async = false !== opts.async;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @api private\n     */\n    create() {\n        const opts = (0, util_js_1.pick)(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        opts.xscheme = !!this.opts.xs;\n        const xhr = (this.xhr = new xmlhttprequest_js_1.default(opts));\n        try {\n            debug(\"xhr open %s: %s\", this.method, this.uri);\n            xhr.open(this.method, this.uri, this.async);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            debug(\"xhr data %s\", this.data);\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon successful response.\n     *\n     * @api private\n     */\n    onSuccess() {\n        this.emit(\"success\");\n        this.cleanup();\n    }\n    /**\n     * Called if we have data.\n     *\n     * @api private\n     */\n    onData(data) {\n        this.emit(\"data\", data);\n        this.onSuccess();\n    }\n    /**\n     * Called upon error.\n     *\n     * @api private\n     */\n    onError(err) {\n        this.emit(\"error\", err);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @api private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @api private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.onData(data);\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @api public\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nexports.Request = Request;\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis_js_1.default ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Polling = void 0;\nconst transport_js_1 = require(\"../transport.js\");\nconst debug_1 = __importDefault(require(\"debug\")); // debug()\nconst yeast_1 = __importDefault(require(\"yeast\"));\nconst parseqs_1 = __importDefault(require(\"parseqs\"));\nconst engine_io_parser_1 = require(\"engine.io-parser\");\nconst debug = (0, debug_1.default)(\"engine.io-client:polling\"); // debug()\nclass Polling extends transport_js_1.Transport {\n    constructor() {\n        super(...arguments);\n        this.polling = false;\n    }\n    /**\n     * Transport name.\n     */\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @api private\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} callback upon buffers are flushed and transport is paused\n     * @api private\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            debug(\"paused\");\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                debug(\"we are currently polling - waiting to pause\");\n                total++;\n                this.once(\"pollComplete\", function () {\n                    debug(\"pre-pause polling complete\");\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                debug(\"we are currently writing - waiting to pause\");\n                total++;\n                this.once(\"drain\", function () {\n                    debug(\"pre-pause writing complete\");\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @api public\n     */\n    poll() {\n        debug(\"polling\");\n        this.polling = true;\n        this.doPoll();\n        this.emit(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @api private\n     */\n    onData(data) {\n        debug(\"polling got data %s\", data);\n        const callback = packet => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose();\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        (0, engine_io_parser_1.decodePayload)(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emit(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n                debug('ignoring poll - transport state \"%s\"', this.readyState);\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @api private\n     */\n    doClose() {\n        const close = () => {\n            debug(\"writing close packet\");\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            debug(\"transport open - closing\");\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            debug(\"transport not open - deferring close\");\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} data packets\n     * @param {Function} drain callback\n     * @api private\n     */\n    write(packets) {\n        this.writable = false;\n        (0, engine_io_parser_1.encodePayload)(packets, data => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emit(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        let port = \"\";\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = (0, yeast_1.default)();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"https\" === schema && Number(this.opts.port) !== 443) ||\n                (\"http\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        const encodedQuery = parseqs_1.default.encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n}\nexports.Polling = Polling;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultBinaryType = exports.usingBrowserWebSocket = exports.WebSocket = exports.nextTick = void 0;\nconst globalThis_js_1 = __importDefault(require(\"../globalThis.js\"));\nexports.nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return cb => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexports.WebSocket = globalThis_js_1.default.WebSocket || globalThis_js_1.default.MozWebSocket;\nexports.usingBrowserWebSocket = true;\nexports.defaultBinaryType = \"arraybuffer\";\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WS = void 0;\nconst transport_js_1 = require(\"../transport.js\");\nconst parseqs_1 = __importDefault(require(\"parseqs\"));\nconst yeast_1 = __importDefault(require(\"yeast\"));\nconst util_js_1 = require(\"../util.js\");\nconst websocket_constructor_js_1 = require(\"./websocket-constructor.js\");\nconst debug_1 = __importDefault(require(\"debug\")); // debug()\nconst engine_io_parser_1 = require(\"engine.io-parser\");\nconst debug = (0, debug_1.default)(\"engine.io-client:websocket\"); // debug()\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nclass WS extends transport_js_1.Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @api {Object} connection options\n     * @api public\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    /**\n     * Transport name.\n     *\n     * @api public\n     */\n    get name() {\n        return \"websocket\";\n    }\n    /**\n     * Opens socket.\n     *\n     * @api private\n     */\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : (0, util_js_1.pick)(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                websocket_constructor_js_1.usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new websocket_constructor_js_1.WebSocket(uri, protocols)\n                        : new websocket_constructor_js_1.WebSocket(uri)\n                    : new websocket_constructor_js_1.WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emit(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType || websocket_constructor_js_1.defaultBinaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @api private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = this.onClose.bind(this);\n        this.ws.onmessage = ev => this.onData(ev.data);\n        this.ws.onerror = e => this.onError(\"websocket error\", e);\n    }\n    /**\n     * Writes data to socket.\n     *\n     * @param {Array} array of packets.\n     * @api private\n     */\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            (0, engine_io_parser_1.encodePacket)(packet, this.supportsBinary, data => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!websocket_constructor_js_1.usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (websocket_constructor_js_1.usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                    debug(\"websocket closed before onclose event\");\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    (0, websocket_constructor_js_1.nextTick)(() => {\n                        this.writable = true;\n                        this.emit(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    /**\n     * Closes socket.\n     *\n     * @api private\n     */\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @api private\n     */\n    uri() {\n        let query = this.query || {};\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        let port = \"\";\n        // avoid port if default for schema\n        if (this.opts.port &&\n            ((\"wss\" === schema && Number(this.opts.port) !== 443) ||\n                (\"ws\" === schema && Number(this.opts.port) !== 80))) {\n            port = \":\" + this.opts.port;\n        }\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = (0, yeast_1.default)();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        const encodedQuery = parseqs_1.default.encode(query);\n        const ipv6 = this.opts.hostname.indexOf(\":\") !== -1;\n        return (schema +\n            \"://\" +\n            (ipv6 ? \"[\" + this.opts.hostname + \"]\" : this.opts.hostname) +\n            port +\n            this.opts.path +\n            (encodedQuery.length ? \"?\" + encodedQuery : \"\"));\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @api public\n     */\n    check() {\n        return (!!websocket_constructor_js_1.WebSocket &&\n            !(\"__initialize\" in websocket_constructor_js_1.WebSocket && this.name === WS.prototype.name));\n    }\n}\nexports.WS = WS;\n","\"use strict\";\n// browser shim for xmlhttprequest module\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst has_cors_1 = __importDefault(require(\"has-cors\"));\nconst globalThis_js_1 = __importDefault(require(\"../globalThis.js\"));\nfunction default_1(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || has_cors_1.default)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis_js_1.default[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\nexports.default = default_1;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.installTimerFunctions = exports.pick = void 0;\nconst globalThis_js_1 = __importDefault(require(\"./globalThis.js\"));\nfunction pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\nexports.pick = pick;\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = clearTimeout;\nfunction installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis_js_1.default);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis_js_1.default);\n    }\n    else {\n        obj.setTimeoutFn = setTimeout.bind(globalThis_js_1.default);\n        obj.clearTimeoutFn = clearTimeout.bind(globalThis_js_1.default);\n    }\n}\nexports.installTimerFunctions = installTimerFunctions;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ERROR_PACKET = exports.PACKET_TYPES_REVERSE = exports.PACKET_TYPES = void 0;\nconst PACKET_TYPES = Object.create(null); // no Map = no polyfill\nexports.PACKET_TYPES = PACKET_TYPES;\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nexports.PACKET_TYPES_REVERSE = PACKET_TYPES_REVERSE;\nObject.keys(PACKET_TYPES).forEach(key => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexports.ERROR_PACKET = ERROR_PACKET;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst commons_js_1 = require(\"./commons.js\");\nconst base64_arraybuffer_1 = require(\"@socket.io/base64-arraybuffer\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType)\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n        };\n    }\n    const packetType = commons_js_1.PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return commons_js_1.ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: commons_js_1.PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1)\n        }\n        : {\n            type: commons_js_1.PACKET_TYPES_REVERSE[type]\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = (0, base64_arraybuffer_1.decode)(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            return data instanceof ArrayBuffer ? new Blob([data]) : data;\n        case \"arraybuffer\":\n        default:\n            return data; // assuming the data is already an ArrayBuffer\n    }\n};\nexports.default = decodePacket;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst commons_js_1 = require(\"./commons.js\");\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(commons_js_1.PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + content);\n    };\n    return fileReader.readAsDataURL(data);\n};\nexports.default = encodePacket;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodePayload = exports.decodePacket = exports.encodePayload = exports.encodePacket = exports.protocol = void 0;\nconst encodePacket_js_1 = require(\"./encodePacket.js\");\nexports.encodePacket = encodePacket_js_1.default;\nconst decodePacket_js_1 = require(\"./decodePacket.js\");\nexports.decodePacket = decodePacket_js_1.default;\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        (0, encodePacket_js_1.default)(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nexports.encodePayload = encodePayload;\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = (0, decodePacket_js_1.default)(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexports.decodePayload = decodePayload;\nexports.protocol = 4;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = exports.connect = exports.io = exports.Socket = exports.Manager = exports.protocol = void 0;\nconst url_js_1 = require(\"./url.js\");\nconst manager_js_1 = require(\"./manager.js\");\nObject.defineProperty(exports, \"Manager\", { enumerable: true, get: function () { return manager_js_1.Manager; } });\nconst socket_js_1 = require(\"./socket.js\");\nObject.defineProperty(exports, \"Socket\", { enumerable: true, get: function () { return socket_js_1.Socket; } });\nconst debug_1 = __importDefault(require(\"debug\")); // debug()\nconst debug = debug_1.default(\"socket.io-client\"); // debug()\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url_js_1.url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        debug(\"ignoring socket cache for %s\", source);\n        io = new manager_js_1.Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            debug(\"new io instance for %s\", source);\n            cache[id] = new manager_js_1.Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\nexports.io = lookup;\nexports.connect = lookup;\nexports.default = lookup;\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager: manager_js_1.Manager,\n    Socket: socket_js_1.Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nvar socket_io_parser_1 = require(\"socket.io-parser\");\nObject.defineProperty(exports, \"protocol\", { enumerable: true, get: function () { return socket_io_parser_1.protocol; } });\n\nmodule.exports = lookup;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Manager = void 0;\nconst engine_io_client_1 = require(\"engine.io-client\");\nconst socket_js_1 = require(\"./socket.js\");\nconst parser = __importStar(require(\"socket.io-parser\"));\nconst on_js_1 = require(\"./on.js\");\nconst backo2_1 = __importDefault(require(\"backo2\"));\nconst component_emitter_1 = require(\"@socket.io/component-emitter\");\nconst debug_1 = __importDefault(require(\"debug\")); // debug()\nconst debug = debug_1.default(\"socket.io-client:manager\"); // debug()\nclass Manager extends component_emitter_1.Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        engine_io_client_1.installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new backo2_1.default({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        debug(\"readyState %s\", this._readyState);\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        debug(\"opening %s\", this.uri);\n        this.engine = new engine_io_client_1.Socket(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on_js_1.on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        // emit `error`\n        const errorSub = on_js_1.on(socket, \"error\", (err) => {\n            debug(\"error\");\n            self.cleanup();\n            self._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                self.maybeReconnectOnOpen();\n            }\n        });\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            debug(\"connect attempt will timeout after %d\", timeout);\n            if (timeout === 0) {\n                openSubDestroy(); // prevents a race condition with the 'open' event\n            }\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                debug(\"connect attempt timed out after %d\", timeout);\n                openSubDestroy();\n                socket.close();\n                // @ts-ignore\n                socket.emit(\"error\", new Error(\"timeout\"));\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"open\");\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on_js_1.on(socket, \"ping\", this.onping.bind(this)), on_js_1.on(socket, \"data\", this.ondata.bind(this)), on_js_1.on(socket, \"error\", this.onerror.bind(this)), on_js_1.on(socket, \"close\", this.onclose.bind(this)), on_js_1.on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        this.decoder.add(data);\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        this.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        debug(\"error\", err);\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new socket_js_1.Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                debug(\"socket %s is still active, skipping close\", nsp);\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        debug(\"writing packet %j\", packet);\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        debug(\"cleanup\");\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        debug(\"disconnect\");\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason) {\n        debug(\"closed due to %s\", reason);\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            debug(\"reconnect failed\");\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            debug(\"will wait %dms before reconnect attempt\", delay);\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                debug(\"attempting reconnect\");\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        debug(\"reconnect attempt error\");\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        debug(\"reconnect success\");\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(function subDestroy() {\n                clearTimeout(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\nexports.Manager = Manager;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.on = void 0;\nfunction on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\nexports.on = on;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Socket = void 0;\nconst socket_io_parser_1 = require(\"socket.io-parser\");\nconst on_js_1 = require(\"./on.js\");\nconst component_emitter_1 = require(\"@socket.io/component-emitter\");\nconst debug_1 = __importDefault(require(\"debug\")); // debug()\nconst debug = debug_1.default(\"socket.io-client:socket\"); // debug()\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\nclass Socket extends component_emitter_1.Emitter {\n    /**\n     * `Socket` constructor.\n     *\n     * @public\n     */\n    constructor(io, nsp, opts) {\n        super();\n        this.connected = false;\n        this.disconnected = true;\n        this.receiveBuffer = [];\n        this.sendBuffer = [];\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on_js_1.on(io, \"open\", this.onopen.bind(this)),\n            on_js_1.on(io, \"packet\", this.onpacket.bind(this)),\n            on_js_1.on(io, \"error\", this.onerror.bind(this)),\n            on_js_1.on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @public\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for connect()\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * @return self\n     * @public\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @return self\n     * @public\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        const packet = {\n            type: socket_io_parser_1.PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            debug(\"emitting packet with ack id %d\", id);\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n            debug(\"discard packet as the transport is not currently writable\");\n        }\n        else if (this.connected) {\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        const timeout = this.flags.timeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    debug(\"removing packet with ack id %d from the buffer\", id);\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            debug(\"event with ack id %d has timed out after %d ms\", id, timeout);\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        this.acks[id] = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, [null, ...args]);\n        };\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        debug(\"transport is open - connecting\");\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data });\n            });\n        }\n        else {\n            this.packet({ type: socket_io_parser_1.PacketType.CONNECT, data: this.auth });\n        }\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @private\n     */\n    onclose(reason) {\n        debug(\"close (%s)\", reason);\n        this.connected = false;\n        this.disconnected = true;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case socket_io_parser_1.PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    const id = packet.data.sid;\n                    this.onconnect(id);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case socket_io_parser_1.PacketType.EVENT:\n                this.onevent(packet);\n                break;\n            case socket_io_parser_1.PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case socket_io_parser_1.PacketType.ACK:\n                this.onack(packet);\n                break;\n            case socket_io_parser_1.PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case socket_io_parser_1.PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case socket_io_parser_1.PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        debug(\"emitting event %j\", args);\n        if (null != packet.id) {\n            debug(\"attaching ack callback to event\");\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            debug(\"sending ack %j\", args);\n            self.packet({\n                type: socket_io_parser_1.PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            debug(\"calling ack %s with %j\", packet.id, packet.data);\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n            debug(\"bad ack %s\", packet.id);\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id) {\n        debug(\"socket connected with id %s\", id);\n        this.id = id;\n        this.connected = true;\n        this.disconnected = false;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => this.packet(packet));\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        debug(\"server disconnect (%s)\", this.nsp);\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually.\n     *\n     * @return self\n     * @public\n     */\n    disconnect() {\n        if (this.connected) {\n            debug(\"performing disconnect (%s)\", this.nsp);\n            this.packet({ type: socket_io_parser_1.PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for disconnect()\n     *\n     * @return self\n     * @public\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     * @public\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @returns self\n     * @public\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * ```\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     * ```\n     *\n     * @returns self\n     * @public\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @param listener\n     * @public\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @param listener\n     * @public\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @param listener\n     * @public\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     *\n     * @public\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n}\nexports.Socket = Socket;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.url = void 0;\nconst parseuri_1 = __importDefault(require(\"parseuri\"));\nconst debug_1 = __importDefault(require(\"debug\")); // debug()\nconst debug = debug_1.default(\"socket.io-client:url\"); // debug()\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nfunction url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            debug(\"protocol-less url %s\", uri);\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        debug(\"parse %s\", uri);\n        obj = parseuri_1.default(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\nexports.url = url;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reconstructPacket = exports.deconstructPacket = void 0;\nconst is_binary_js_1 = require(\"./is-binary.js\");\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nfunction deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nexports.deconstructPacket = deconstructPacket;\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (is_binary_js_1.isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nfunction reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    packet.attachments = undefined; // no longer useful\n    return packet;\n}\nexports.reconstructPacket = reconstructPacket;\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder) {\n        return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Decoder = exports.Encoder = exports.PacketType = exports.protocol = void 0;\nconst component_emitter_1 = require(\"@socket.io/component-emitter\");\nconst binary_js_1 = require(\"./binary.js\");\nconst is_binary_js_1 = require(\"./is-binary.js\");\nconst debug_1 = require(\"debug\"); // debug()\nconst debug = debug_1.default(\"socket.io-parser\"); // debug()\n/**\n * Protocol version.\n *\n * @public\n */\nexports.protocol = 5;\nvar PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType = exports.PacketType || (exports.PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nclass Encoder {\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        debug(\"encoding packet %j\", obj);\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (is_binary_js_1.hasBinary(obj)) {\n                obj.type =\n                    obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK;\n                return this.encodeAsBinary(obj);\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data);\n        }\n        debug(\"encoded %j as %s\", obj, str);\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = binary_js_1.deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\nexports.Encoder = Encoder;\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nclass Decoder extends component_emitter_1.Emitter {\n    constructor() {\n        super();\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            packet = this.decodeString(obj);\n            if (packet.type === PacketType.BINARY_EVENT ||\n                packet.type === PacketType.BINARY_ACK) {\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (is_binary_js_1.isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        debug(\"decoded %s as %j\", str, p);\n        return p;\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return typeof payload === \"object\";\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || typeof payload === \"object\";\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return Array.isArray(payload) && payload.length > 0;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n        }\n    }\n}\nexports.Decoder = Decoder;\nfunction tryParse(str) {\n    try {\n        return JSON.parse(str);\n    }\n    catch (e) {\n        return false;\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = binary_js_1.reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasBinary = exports.isBinary = void 0;\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nfunction isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexports.isBinary = isBinary;\nfunction hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.hasBinary = hasBinary;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(607);\n"],"names":["chars","lookup","Uint8Array","i","length","charCodeAt","encode","arraybuffer","bytes","len","base64","substring","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","p","ArrayBuffer","Emitter","obj","key","prototype","mixin","exports","on","addEventListener","event","fn","this","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","removeEventListener","cb","callbacks","splice","emit","args","Array","slice","emitReserved","listeners","hasListeners","Backoff","opts","ms","min","max","factor","jitter","attempts","module","duration","Math","pow","rand","random","deviation","floor","reset","setMin","setMax","setJitter","formatArgs","useColors","namespace","humanize","diff","c","color","index","lastC","replace","match","save","namespaces","storage","setItem","removeItem","error","load","r","getItem","process","env","DEBUG","window","type","__nwjs","navigator","userAgent","toLowerCase","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","RegExp","$1","localStorage","localstorage","destroy","warned","warn","colors","log","debug","formatters","j","v","JSON","stringify","message","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","self","curr","Number","Date","prev","coerce","unshift","format","formatter","val","call","selectColor","extend","Object","defineProperty","enumerable","configurable","get","set","init","delimiter","newDebug","toNamespace","regexp","toString","default","Error","stack","disable","names","map","skips","join","enable","split","substr","name","test","keys","forEach","hash","abs","XMLHttpRequest","err","s","m","h","d","plural","msAbs","n","isPlural","round","options","str","String","exec","parseFloat","parse","isFinite","long","fmtShort","hasOwnProperty","encodeURIComponent","qs","qry","pairs","l","pair","decodeURIComponent","re","parts","path","src","b","indexOf","e","query","data","uri","source","host","authority","ipv6uri","pathNames","queryKey","$0","$2","socket","chatlist","id","connectHandler","sendMessageHandler","fetchMessagesHandler","newMessageHandler","updateMessagesHandler","refreshChatHandler","onConnectHandler","handler","onSendMessageHandler","onFetchMessagesHandler","onNewMessageHandler","onUpdateMessagesHandler","onRefreshChatHandler","connect","app","member","ChattyException","at","with","filter","MemberId","value","undefined","distinctKey","generateDistinctKey","url","transports","auth","token","apiKey","forceNew","addListener","disconnect","fetchMessages","refresh","ChattyEvent","FETCH_MESSAGES","sendMessage","SEND_MESSAGE","retry","refreshChat","ChatId","REFRESH_CHAT","markAsRead","MARK_AS_READ","CONNECT_DONE","chat","CONNECT_FAIL","FETCH_MESSAGES_DONE","FETCH_MESSAGES_FAIL","SEND_MESSAGE_DONE","refreshChatList","SEND_MESSAGE_FAIL","SEND_MESSAGE_RETRY","NEW_MESSAGE","MARK_AS_READ_DONE","MARK_AS_READ_FAIL","MARK_AS_READ_BYPASS","UPDATE_MESSAGES","messages","REFRESH_CHAT_DONE","REFRESH_CHAT_FAIL","Chat","fetchChatListHandler","refreshChatListHandler","onFetchChatListHandler","onRefreshChatListHandler","fetchChatList","FETCH_CHATLIST","REFRESH_CHATLIST","FETCH_CHATLIST_DONE","chats","FETCH_CHATLIST_FAIL","REFRESH_CHATLIST_DONE","REFRESH_CHATLIST_FAIL","ChatList","MemberPermissionType","DefaultSystemMessages","welcome","invite","exclude","leave","SupportedImageFormat","SupportedVideoFormat","chattyInstance","initials","apiUrl","deviceInfo","platform","language","product","sdkVersion","version","device","updateMember","info","exit","deviceToken","connectChatList","disconnectChatList","onChatListConnect","onChatListFetch","onChatListRefresh","connectChat","disconnectChat","sendTextMessage","text","Chatty","createdAt","by","SenderId","sendFileMessage","files","Sender","uploadFileCF","then","catch","onChatConnect","onMessageSend","onMessagesFetch","onMessagesUpdate","onMessageReceive","onChatRefresh","isArray","result","md5_cmn","_","f","safe_add","bit_rol","md5_ff","md5_gg","md5_hh","md5_ii","sort","charAt","M","fromCharCode","V","t","g","Y","X","createChat","payload","Promise","resolve","reject","fetch","method","headers","body","response","ok","json","status","statusText","updateChat","createMessage","system","getMissedTotalCount","getMembersByGroup","group","App","changeMemberPermission","permission","ADMIN","deleteMember","fileCheckValidation","all","file","enableImageUpload","enableVideoUpload","includes","signedurl","form","FormData","append","uploadUrl","uploadResult","thumbnailSize","uploadFile","size","maxImageSize","maxVideoSize","cdnUrl","filename","toISOString","blob","uploadURL","responsePut","thumbnail","reportError","joinChat","leaveChat","inviteMembers","MemberIds","excludeMembers","ERR","E1001","E1002","E1003","E1004","E1005","E1006","E1007","E2000","E2001","E2002","E2003","E2004","E2005","E3001","E3002","E4001","E4002","E4003","E4004","E4005","E4006","E4007","E4008","errorCode","customMessage","errorMessage","alphabet","seed","num","encoded","yeast","now","decoded","Function","installTimerFunctions","Transport","protocol","Socket","socket_js_1","transport_js_1","index_js_1","util_js_1","__importDefault","mod","__esModule","parseqs_1","parseuri_1","debug_1","component_emitter_1","engine_io_parser_1","constructor","super","hostname","secure","port","location","readyState","writeBuffer","prevBufferLen","assign","agent","withCredentials","upgrade","timestampParam","rememberUpgrade","rejectUnauthorized","perMessageDeflate","threshold","transportOptions","closeOnBeforeunload","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","transport","close","offlineEventListener","onClose","open","createTransport","o","clone","EIO","sid","priorWebsocketSuccess","setTimeoutFn","shift","setTransport","onDrain","bind","onPacket","onError","probe","failed","onTransportOpen","send","msg","upgrading","pause","cleanup","flush","freezeTransport","onerror","onTransportClose","onclose","onupgrade","to","onOpen","packet","onHandshake","resetPingTimeout","sendPacket","code","filterUpgrades","clearTimeoutFn","autoUnref","unref","writable","write","compress","cleanupAndClose","waitForUpgrade","reason","desc","filteredUpgrades","description","doOpen","doClose","packets","onData","decodePacket","binaryType","polling_xhr_js_1","websocket_js_1","websocket","WS","polling","XHR","Request","xmlhttprequest_js_1","globalThis_js_1","polling_js_1","empty","hasXHR2","xdomain","responseType","Polling","isSSL","xd","xs","forceBase64","supportsBinary","request","doWrite","req","doPoll","pollXhr","async","create","pick","xscheme","xhr","extraHeaders","setDisableHeaderCheck","setRequestHeader","requestTimeout","timeout","onreadystatechange","onLoad","requestsCount","requests","onSuccess","fromError","abort","responseText","attachEvent","unloadHandler","terminationEvent","yeast_1","poll","onPause","total","decodePayload","encodePayload","schema","timestampRequests","b64","encodedQuery","defaultBinaryType","usingBrowserWebSocket","WebSocket","nextTick","MozWebSocket","websocket_constructor_js_1","isReactNative","check","protocols","ws","addEventListeners","onopen","_socket","onmessage","ev","lastPacket","encodePacket","Buffer","byteLength","has_cors_1","concat","attr","reduce","acc","k","NATIVE_SET_TIMEOUT","setTimeout","NATIVE_CLEAR_TIMEOUT","clearTimeout","useNativeTimers","ERROR_PACKET","PACKET_TYPES_REVERSE","PACKET_TYPES","commons_js_1","base64_arraybuffer_1","withNativeArrayBuffer","decodeBase64Packet","mapBinary","Blob","encodedPacket","withNativeBlob","encodeBlobAsBase64","callback","fileReader","FileReader","onload","content","readAsDataURL","isView","buffer","encodePacket_js_1","decodePacket_js_1","SEPARATOR","encodedPackets","count","encodedPayload","decodedPacket","io","Manager","url_js_1","manager_js_1","cache","parsed","sameNamespace","multiplex","socket_io_parser_1","__createBinding","k2","__setModuleDefault","__importStar","engine_io_client_1","parser","on_js_1","backo2_1","_a","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_readyState","_parser","encoder","Encoder","decoder","Decoder","_autoConnect","autoConnect","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","reconnect","engine","skipReconnect","openSubDestroy","errorSub","timer","onping","ondata","ondecoded","add","nsp","_destroy","active","_close","_packet","subDestroy","delay","onreconnect","attempt","RESERVED_EVENTS","freeze","connect_error","disconnecting","newListener","connected","disconnected","receiveBuffer","sendBuffer","ids","acks","flags","subEvents","onpacket","PacketType","EVENT","ack","pop","_registerAckCallback","isTransportWritable","volatile","CONNECT","onconnect","BINARY_EVENT","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","CONNECT_ERROR","emitEvent","_anyListeners","listener","sent","emitBuffered","onAny","prependAny","offAny","listenersAny","loc","href","reconstructPacket","deconstructPacket","is_binary_js_1","_deconstructPacket","buffers","isBinary","placeholder","_placeholder","newData","_reconstructPacket","packetData","pack","attachments","binary_js_1","hasBinary","encodeAsString","encodeAsBinary","deconstruction","decodeString","reconstructor","BinaryReconstructor","takeBinaryData","start","buf","next","tryParse","isPayloadValid","static","finishedReconstruction","reconPack","binData","withNativeFile","File","toJSON","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","prop","Symbol","toStringTag","__webpack_exports__"],"sourceRoot":""}